webpackJsonp([2],{529:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t(0),o=t.n(a),l=t(61),r=(t.n(l),t(546)),s=(t.n(r),t(47)),i=t(48),c=t(554),u=t(553),p=t(547),d=t(822),f=t(548),m=t(550),h=t(551),y=t.n(h),b=t(549),v=t.n(b),g=t(568),S=t.n(g),E=t(555),T=t.n(E),C=t(205),P=t.n(C),D=t(832),w=t.n(D),_=t(569),k=t.n(_),I=t(204),x=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function a(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}}(),M=this&&this.__decorate||function(e,n,t,a){var o,l=arguments.length,r=l<3?n:null===a?a=Object.getOwnPropertyDescriptor(n,t):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,n,t,a);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(l<3?o(r):l>3?o(n,t,r):o(n,t))||r);return l>3&&r&&Object.defineProperty(n,t,r),r},R=this&&this.__metadata||function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},j=this&&this.__awaiter||function(e,n,t,a){return new(t||(t=Promise))(function(o,l){function r(e){try{i(a.next(e))}catch(e){l(e)}}function s(e){try{i(a.throw(e))}catch(e){l(e)}}function i(e){e.done?o(e.value):new t(function(n){n(e.value)}).then(r,s)}i((a=a.apply(e,n||[])).next())})},O=this&&this.__generator||function(e,n){function t(e){return function(n){return a([e,n])}}function a(t){if(o)throw new TypeError("Generator is already executing.");for(;i;)try{if(o=1,l&&(r=l[2&t[0]?"return":t[0]?"throw":"next"])&&!(r=r.call(l,t[1])).done)return r;switch(l=0,r&&(t=[0,r.value]),t[0]){case 0:case 1:r=t;break;case 4:return i.label++,{value:t[1],done:!1};case 5:i.label++,l=t[1],t=[0];continue;case 7:t=i.ops.pop(),i.trys.pop();continue;default:if(r=i.trys,!(r=r.length>0&&r[r.length-1])&&(6===t[0]||2===t[0])){i=0;continue}if(3===t[0]&&(!r||t[1]>r[0]&&t[1]<r[3])){i.label=t[1];break}if(6===t[0]&&i.label<r[1]){i.label=r[1],r=t;break}if(r&&i.label<r[2]){i.label=r[2],i.ops.push(t);break}r[2]&&i.ops.pop(),i.trys.pop();continue}t=n.call(e,i)}catch(e){t=[6,e],l=0}finally{o=r=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var o,l,r,s,i={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},L=this&&this.__read||function(e,n){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var a,o,l=t.call(e),r=[];try{for(;(void 0===n||n-- >0)&&!(a=l.next()).done;)r.push(a.value)}catch(e){o={error:e}}finally{try{a&&!a.done&&(t=l.return)&&t.call(l)}finally{if(o)throw o.error}}return r},N=this&&this.__spread||function(){for(var e=[],n=0;n<arguments.length;n++)e=e.concat(L(arguments[n]));return e},A=(q=["margin-left: 1em;"],q.raw=["margin-left: 1em;"],Object(s.b)(v.a)(q)),F=(U=["max-width: 250px;"],U.raw=["max-width: 250px;"],Object(s.b)(k.a)(U)),z=(H=["margin: 0.5em !important;"],H.raw=["margin: 0.5em !important;"],Object(s.b)(w.a)(H)),K=[{value:"user",label:"user(最近联系人(用户)，组织架构，我的好友)"},{value:"chatroom",label:"checked={values && values.indexOf(name) > -1}"},{value:"publicAccount",label:"publicAccount(公众账号)"},{value:"localContacts",label:"localContacts(手机联系人)"},{value:"visitor",label:"访客"}],B=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.userId="u116115",n.type=2,n.selectSessionParams={multiple:!0,title:"选择会话",sessionType:[],limit:void 0,unselect:!0,tenementId:void 0,selected:[]},n.selectedSession=[],n.selectSelected=function(e){return j(n,void 0,void 0,function(){var n,t;return O(this,function(a){switch(a.label){case 0:e.preventDefault(),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,Object(I.e)().selectSession()];case 2:return n=a.sent(),this.selectSessionParams.selected=n,[3,4];case 3:return t=a.sent(),console.log("选择会话失败",t),[3,4];case 4:return[2]}})})},n.handleMultipleToggle=function(e,t){n.selectSessionParams.multiple=t},n.handleTitleChange=function(e){n.selectSessionParams.title=e.target.value},n.handleUserIdChange=function(e){n.userId=e.target.value},n.selectSession=function(){return j(n,void 0,void 0,function(){var e,n;return O(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Object(I.e)().selectSession(this.selectSessionParams)];case 1:return e=t.sent(),this.selectedSession=e,[3,3];case 2:return n=t.sent(),n instanceof I.a&&alert("选择会话失败: "+n.errCode+": "+n.message),[3,3];case 3:return[2]}})})},n.openSession1=function(e,t){void 0===e&&(e=n.userId),Object(I.e)().openDialog({type:t?"user"===t?2:1:2,id:e})},n.openSession=function(){Object(I.e)().openDialog({id:n.userId,type:n.type})},n}return x(n,e),n.prototype.render=function(){var e=this;return o.a.createElement("div",{className:this.props.className},o.a.createElement(r.Helmet,null,o.a.createElement("title",null,"会话")),o.a.createElement(p.a,null,"1. 会话选择器",o.a.createElement(m.a,{android:!0,ios:!0,pc:!0})),o.a.createElement(f.a,null,o.a.createElement(F,{label:"多选",toggled:this.selectSessionParams.multiple,onToggle:this.handleMultipleToggle}),o.a.createElement("br",null),o.a.createElement(y.a,{floatingLabelText:"标题",value:this.selectSessionParams.title,onChange:this.handleTitleChange}),o.a.createElement("br",null),o.a.createElement(T.a,{multiple:!0,floatingLabelText:"会话类型",value:N(this.selectSessionParams.sessionType),onChange:function(n,t,a){e.selectSessionParams.sessionType=a}},K.map(function(n){return o.a.createElement(P.a,{key:n.value,value:n.value,primaryText:n.label,checked:-1!==(e.selectSessionParams.sessionType||[]).indexOf(n.value),insetChildren:!0})})),o.a.createElement("br",null),o.a.createElement(y.a,{floatingLabelText:"最多可选择数目",value:this.selectSessionParams.limit,onChange:function(n){var t=""===n.target.value.trim()?void 0:parseInt(n.target.value,10);e.selectSessionParams.limit=null==t?t:Number.isNaN(t)?void 0:t}}),o.a.createElement("br",null),o.a.createElement(F,{label:"是否可以取消选择",toggled:this.selectSessionParams.unselect,onToggle:function(n,t){return e.selectSessionParams.unselect=t}}),o.a.createElement("br",null),o.a.createElement(y.a,{floatingLabelText:"企业id",value:this.selectSessionParams.tenementId,onChange:function(n){e.selectSessionParams.tenementId=n.target.value}}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("label",null,"已选中:"),o.a.createElement("a",{onClick:this.selectSelected,href:"#"},"选择"),(this.selectSessionParams.selected||[]).map(function(e){return o.a.createElement(z,{key:e.sessionId},e.name,"(",e.sessionId,":",e.sessionType,")")}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(A,{label:"选择会话",onClick:this.selectSession}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement(d.a,null,"请求参数"),o.a.createElement(c.a,null,"\n```json\n"+JSON.stringify(this.selectSessionParams,void 0,2)+"\n```\n          "),o.a.createElement(d.a,null,"响应"),o.a.createElement(c.a,null,"\n```json\n"+JSON.stringify(this.selectedSession||[],void 0,2)+"\n```\n          "),o.a.createElement("ul",null,this.selectedSession.map(function(n){return o.a.createElement("li",{key:n.sessionId},n.sessionId,"(",n.sessionType,")"," ",o.a.createElement(S.a,{label:"打开会话框",onClick:function(){return e.openSession1(n.sessionId,n.sessionType)}}))}))),o.a.createElement(f.a,null,o.a.createElement(d.a,null,"示例代码"),o.a.createElement(c.a,null,"\n```typescript\nimport Api, { BridgeResponseError, SelectSessionResponse } from '@gdjiami/gzb-jssdk'\nconst api = Api()\n\nasync function selectionSession(multiple: boolean, title: string): Promise<SelectSessionResponse> {\n  try {\n    return await api.selectSession({ multiple, title })\n  } catch (error) {\n    if (error instanceof BridgeResponseError) {\n      alert(`选择会话失败: ${error.errCode}: ${error.message}`)\n    }\n  }\n}\n\napi(true, '选择会话')\n```\n          ")),o.a.createElement(p.a,null,"2. 打开会话",o.a.createElement(m.a,{android:!0,ios:!0,pc:!0})),o.a.createElement(f.a,null,o.a.createElement(y.a,{hintText:"输入用户id",value:this.userId,onChange:this.handleUserIdChange}),o.a.createElement("br",null),o.a.createElement(T.a,{floatingLabelText:"type",value:this.type,onChange:function(n,t,a){return e.type=a}},o.a.createElement(P.a,{value:1,primaryText:"群聊"}),o.a.createElement(P.a,{value:2,primaryText:"单聊"}),o.a.createElement(P.a,{value:3,primaryText:"公告广播"}),o.a.createElement(P.a,{value:4,primaryText:"访客"})),o.a.createElement("br",null),o.a.createElement(A,{label:"打开会话框",onClick:function(){return e.openSession()}})),o.a.createElement(f.a,null,o.a.createElement(d.a,null,"示例代码"),o.a.createElement(c.a,null,"\n```typescript\nimport Api, { DialogType } from '@gdjiami/gzb-jssdk'\nconst api = Api()\napi().openDialog({ type: DialogType.Chat, id: userID })\n```\n          ")),o.a.createElement(f.a,null,o.a.createElement(p.a,null,"文档"),o.a.createElement(u.a,null,"\n###  selectSession\n用户获取会话id\n\n► **selectSession**(params?: *SelectSessionParams*): `Promise`<SelectSessionResponse>\n\n**Parameters:**\n\n| Param | Type | Description |\n| ------ | ------ | ------ |\n| params | SelectSessionParams   |  参数 |\n\n**Returns:** `Promise`< SelectSessionResponse>\n\n**Types:**\n```typescript\n\n/**\n * 会话类型\n */\nexport type SessionType =\n  | 'user'\n  | 'chatroom'\n  | 'publicAccount'\n  | 'localContact'\n  | 'visitor'\n\n/**\n * 选择会话请求参数\n */\ninterface SelectSessionParams {\n  /**\n   * 是否支持多选\n   */\n  multiple?: boolean\n  /**\n   * 对话框显示的标题\n   */\n  title?: string\n  /**\n   * 选择会话的类型\n   */\n  sessionType?: SessionType[]\n  /**\n   * 限制\n   */\n  limit?: number\n  /**\n   * 已选择的会话\n   */\n  selected?: GZBSession[]\n  /**\n   * 是否可以取消已选择的会话\n   */\n  unselect?: boolean\n  tenementId?: string\n}\n\n/**\n * 选择会话响应参数\n */\ntype SelectSessionResponse = Array<{\n  sessionId: string\n  sessionType: 'user' | 'chatroom'\n  icon?: string\n  name?: string\n}>\n```\n\n---\n\n###  openDialog\n\n► **openDialog**(params: *DialogParams*): `void`\n\n**Parameters:**\n\n| Param | Type | Description |\n| ------ | ------ | ------ |\n| params | DialogParams  |  选项<br/>+ type: 会话类型, 1 群聊 2 单聊 3公告广播<br/>+ id: 会话ID， 群组id或个人id<br/>+ messageId: //消息记录ID |\n\n**Returns:** `void`\n\n**Types:**\n\n```typescript\n/**\n * 会话类型\n */\nenum DialogType {\n  /**\n   * 群聊\n   */\n  GroupChat = 1,\n  /**\n   * 单聊\n   */\n  Chat,\n  /**\n   * 公告广播\n   */\n  Announcement,\n  /**\n   * 打开访客聊天窗口, id为访客id\n   */\n  Visitor,\n}\n\n/**\n * 打开会话框请求参数\n */\ninterface DialogParams {\n  type: DialogType\n  id: string\n  messageId?: string\n}\n```\n          ")))},M([i.observable,R("design:type",String)],n.prototype,"userId",void 0),M([i.observable,R("design:type",Number)],n.prototype,"type",void 0),M([i.observable,R("design:type",Object)],n.prototype,"selectSessionParams",void 0),M([i.observable,R("design:type",Array)],n.prototype,"selectedSession",void 0),n=M([l.observer],n)}(o.a.Component);n.default=B;var q,U,H},822:function(e,n,t){"use strict";var a=t(47);n.a=(o=["\n  font-size: 0.95em;\n  margin: 0.6em 0;\n"],o.raw=["\n  font-size: 0.95em;\n  margin: 0.6em 0;\n"],a.b.h3(o));var o},832:function(e,n,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=t(833),l=a(o);n.default=l.default},833:function(e,n,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e,n,t){var a=n.muiTheme.chip,o=e.backgroundColor||a.backgroundColor,l=(0,_.emphasize)(o,.08),r=(0,_.emphasize)(o,.12);return{avatar:{marginRight:-4},deleteIcon:{color:t.deleteHovered?(0,_.fade)(a.deleteIconColor,.4):a.deleteIconColor,cursor:"pointer",margin:"4px 4px 0px -8px"},label:{color:e.labelColor||a.textColor,fontSize:a.fontSize,fontWeight:a.fontWeight,lineHeight:"32px",paddingLeft:12,paddingRight:12,userSelect:"none",whiteSpace:"nowrap"},root:{backgroundColor:t.clicked?r:t.focused||t.hovered?l:o,borderRadius:16,boxShadow:t.clicked?a.shadow:null,cursor:e.onClick?"pointer":"default",display:"flex",whiteSpace:"nowrap",width:"fit-content"}}}Object.defineProperty(n,"__esModule",{value:!0});var l=t(14),r=a(l),s=t(13),i=a(s),c=t(7),u=a(c),p=t(5),d=a(p),f=t(6),m=a(f),h=t(8),y=a(h),b=t(9),v=a(b),g=t(11),S=a(g),E=t(0),T=a(E),C=t(1),P=a(C),D=t(76),w=a(D),_=t(75),k=t(116),I=a(k),x=t(834),M=a(x),R=function(e){function n(){var e,t,a,o;(0,d.default)(this,n);for(var l=arguments.length,r=Array(l),s=0;s<l;s++)r[s]=arguments[s];return t=a=(0,y.default)(this,(e=n.__proto__||(0,u.default)(n)).call.apply(e,[this].concat(r))),a.state={clicked:!1,deleteHovered:!1,focused:!1,hovered:!1},a.handleBlur=function(e){a.setState({clicked:!1,focused:!1}),a.props.onBlur(e)},a.handleFocus=function(e){(a.props.onClick||a.props.onRequestDelete)&&a.setState({focused:!0}),a.props.onFocus(e)},a.handleKeyboardFocus=function(e,n){n?(a.handleFocus(),a.props.onFocus(e)):a.handleBlur(),a.props.onKeyboardFocus(e,n)},a.handleKeyDown=function(e){"backspace"===(0,w.default)(e)&&(e.preventDefault(),a.props.onRequestDelete&&a.props.onRequestDelete(e)),a.props.onKeyDown(e)},a.handleMouseDown=function(e){0===e.button&&(e.stopPropagation(),a.props.onClick&&a.setState({clicked:!0})),a.props.onMouseDown(e)},a.handleMouseEnter=function(e){a.props.onClick&&a.setState({hovered:!0}),a.props.onMouseEnter(e)},a.handleMouseEnterDeleteIcon=function(){a.setState({deleteHovered:!0})},a.handleMouseLeave=function(e){a.setState({clicked:!1,hovered:!1}),a.props.onMouseLeave(e)},a.handleMouseLeaveDeleteIcon=function(){a.setState({deleteHovered:!1})},a.handleMouseUp=function(e){a.setState({clicked:!1}),a.props.onMouseUp(e)},a.handleTouchTapDeleteIcon=function(e){e.stopPropagation(),a.props.onRequestDelete(e)},a.handleTouchEnd=function(e){a.setState({clicked:!1}),a.props.onTouchEnd(e)},a.handleTouchStart=function(e){e.stopPropagation(),a.props.onClick&&a.setState({clicked:!0}),a.props.onTouchStart(e)},o=t,(0,y.default)(a,o)}return(0,v.default)(n,e),(0,m.default)(n,[{key:"render",value:function(){var e={onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp,onTouchEnd:this.handleTouchEnd,onTouchStart:this.handleTouchStart,onKeyboardFocus:this.handleKeyboardFocus},n=this.context.muiTheme.prepareStyles,t=o(this.props,this.context,this.state),a=this.props,l=a.children,s=a.containerElement,c=a.style,u=a.className,p=a.deleteIconStyle,d=a.labelStyle,f=(a.labelColor,a.backgroundColor,a.onRequestDelete,(0,i.default)(a,["children","containerElement","style","className","deleteIconStyle","labelStyle","labelColor","backgroundColor","onRequestDelete"])),m=this.props.onRequestDelete,h=null,y=m?T.default.createElement(M.default,{color:t.deleteIcon.color,style:(0,S.default)(t.deleteIcon,p),onClick:this.handleTouchTapDeleteIcon,onMouseEnter:this.handleMouseEnterDeleteIcon,onMouseLeave:this.handleMouseLeaveDeleteIcon}):null,b=l;return T.default.Children.count(b)>1&&(b=T.default.Children.toArray(b),T.default.isValidElement(b[0])&&"Avatar"===b[0].type.muiName&&(h=b.shift(),h=T.default.cloneElement(h,{style:(0,S.default)(t.avatar,h.props.style),size:32}))),T.default.createElement(I.default,(0,r.default)({},f,e,{className:u,containerElement:s,disableTouchRipple:!0,disableFocusRipple:!0,style:(0,S.default)(t.root,c)}),h,T.default.createElement("span",{style:n((0,S.default)(t.label,d))},b),y)}}]),n}(E.Component);R.defaultProps={containerElement:"div",onBlur:function(){},onFocus:function(){},onKeyDown:function(){},onKeyboardFocus:function(){},onMouseDown:function(){},onMouseEnter:function(){},onMouseLeave:function(){},onMouseUp:function(){},onTouchEnd:function(){},onTouchStart:function(){}},R.contextTypes={muiTheme:P.default.object.isRequired},R.propTypes={},n.default=R},834:function(e,n,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=t(0),l=a(o),r=t(63),s=a(r),i=t(64),c=a(i),u=function(e){return l.default.createElement(c.default,e,l.default.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}))};u=(0,s.default)(u),u.displayName="NavigationCancel",u.muiName="SvgIcon",n.default=u}});
//# sourceMappingURL=2.36f594f4.chunk.js.map