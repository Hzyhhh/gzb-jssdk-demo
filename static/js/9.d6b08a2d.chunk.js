webpackJsonp([9],{529:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t(0),r=t.n(a),s=t(61),i=(t.n(s),t(546)),l=(t.n(i),t(48)),o=t(47),c=t(554),u=t(553),p=t(547),m=t(548),d=t(550),f=t(551),y=t.n(f),h=t(549),b=t.n(h),g=t(568),v=t.n(g),S=t(555),E=t.n(S),P=t(205),T=t.n(P),w=t(569),_=t.n(w),D=t(204),j=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var t in n)n.hasOwnProperty(t)&&(e[t]=n[t])};return function(n,t){function a(){this.constructor=n}e(n,t),n.prototype=null===t?Object.create(t):(a.prototype=t.prototype,new a)}}(),x=this&&this.__decorate||function(e,n,t,a){var r,s=arguments.length,i=s<3?n:null===a?a=Object.getOwnPropertyDescriptor(n,t):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,n,t,a);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(i=(s<3?r(i):s>3?r(n,t,i):r(n,t))||i);return s>3&&i&&Object.defineProperty(n,t,i),i},I=this&&this.__metadata||function(e,n){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,n)},C=this&&this.__awaiter||function(e,n,t,a){return new(t||(t=Promise))(function(r,s){function i(e){try{o(a.next(e))}catch(e){s(e)}}function l(e){try{o(a.throw(e))}catch(e){s(e)}}function o(e){e.done?r(e.value):new t(function(n){n(e.value)}).then(i,l)}o((a=a.apply(e,n||[])).next())})},R=this&&this.__generator||function(e,n){function t(e){return function(n){return a([e,n])}}function a(t){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,s&&(i=s[2&t[0]?"return":t[0]?"throw":"next"])&&!(i=i.call(s,t[1])).done)return i;switch(s=0,i&&(t=[0,i.value]),t[0]){case 0:case 1:i=t;break;case 4:return o.label++,{value:t[1],done:!1};case 5:o.label++,s=t[1],t=[0];continue;case 7:t=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!(i=i.length>0&&i[i.length-1])&&(6===t[0]||2===t[0])){o=0;continue}if(3===t[0]&&(!i||t[1]>i[0]&&t[1]<i[3])){o.label=t[1];break}if(6===t[0]&&o.label<i[1]){o.label=i[1],i=t;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(t);break}i[2]&&o.ops.pop(),o.trys.pop();continue}t=n.call(e,o)}catch(e){t=[6,e],s=0}finally{r=i=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}var r,s,i,l,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return l={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(l[Symbol.iterator]=function(){return this}),l},O=(M=["margin-left: 1em;"],M.raw=["margin-left: 1em;"],Object(l.b)(b.a)(M)),k=(N=["max-width: 250px;"],N.raw=["max-width: 250px;"],Object(l.b)(_.a)(N)),A=function(e){function n(){var n=null!==e&&e.apply(this,arguments)||this;return n.userId="u116115",n.type=2,n.selectSessionParams={multiple:!0,title:"选择会话"},n.selectedSession=[],n.handleMultipleToggle=function(e,t){n.selectSessionParams.multiple=t},n.handleTitleChange=function(e){n.selectSessionParams.title=e.target.value},n.handleUserIdChange=function(e){n.userId=e.target.value},n.selectSession=function(){return C(n,void 0,void 0,function(){var e,n;return R(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Object(D.e)().selectSession(this.selectSessionParams)];case 1:return e=t.sent(),this.selectedSession=e,[3,3];case 2:return n=t.sent(),n instanceof D.a&&alert("选择会话失败: "+n.errCode+": "+n.message),[3,3];case 3:return[2]}})})},n.openSession1=function(e,t){void 0===e&&(e=n.userId),Object(D.e)().openDialog({type:t?"user"===t?2:1:2,id:e})},n.openSession=function(){Object(D.e)().openDialog({id:n.userId,type:n.type})},n}return j(n,e),n.prototype.render=function(){var e=this;return r.a.createElement("div",{className:this.props.className},r.a.createElement(i.Helmet,null,r.a.createElement("title",null,"会话")),r.a.createElement(p.a,null,"会话选择器",r.a.createElement(d.a,{android:!0,ios:!0,pc:!0})),r.a.createElement(m.a,null,r.a.createElement(k,{label:"多选",toggled:this.selectSessionParams.multiple,onToggle:this.handleMultipleToggle}),r.a.createElement("br",null),r.a.createElement(y.a,{hintText:"输入显示标题",value:this.selectSessionParams.title,onChange:this.handleTitleChange}),r.a.createElement(O,{label:"选择会话",onClick:this.selectSession}),r.a.createElement("br",null),r.a.createElement("ul",null,this.selectedSession.map(function(n){return r.a.createElement("li",{key:n.sessionId},n.sessionId,"(",n.sessionType,")"," ",r.a.createElement(v.a,{label:"打开会话框",onClick:function(){return e.openSession1(n.sessionId,n.sessionType)}}))}))),r.a.createElement(m.a,null,r.a.createElement(p.a,null,"示例代码"),r.a.createElement(c.a,null,"\n```typescript\nimport Api, { BridgeResponseError, SelectSessionResponse } from '@gdjiami/gzb-jssdk'\nconst api = Api()\n\nasync function selectionSession(multiple: boolean, title: string): Promise<SelectSessionResponse> {\n  try {\n    return await api.selectSession({ multiple, title })\n  } catch (error) {\n    if (error instanceof BridgeResponseError) {\n      alert(`选择会话失败: ${error.errCode}: ${error.message}`)\n    }\n  }\n}\n\napi(true, '选择会话')\n```\n          ")),r.a.createElement(p.a,null,"打开会话",r.a.createElement(d.a,{android:!0,ios:!0,pc:!0})),r.a.createElement(m.a,null,r.a.createElement(y.a,{hintText:"输入用户id",value:this.userId,onChange:this.handleUserIdChange}),r.a.createElement("br",null),r.a.createElement(E.a,{floatingLabelText:"type",value:this.type,onChange:function(n,t,a){return e.type=a}},r.a.createElement(T.a,{value:1,primaryText:"群聊"}),r.a.createElement(T.a,{value:2,primaryText:"单聊"}),r.a.createElement(T.a,{value:3,primaryText:"公告广播"}),r.a.createElement(T.a,{value:4,primaryText:"访客"})),r.a.createElement("br",null),r.a.createElement(O,{label:"打开会话框",onClick:function(){return e.openSession()}})),r.a.createElement(m.a,null,r.a.createElement(p.a,null,"示例代码"),r.a.createElement(c.a,null,"\n```typescript\nimport Api, { DialogType } from '@gdjiami/gzb-jssdk'\nconst api = Api()\napi().openDialog({ type: DialogType.Chat, id: userID })\n```\n          ")),r.a.createElement(m.a,null,r.a.createElement(p.a,null,"文档"),r.a.createElement(u.a,null,"\n###  selectSession\n用户获取会话id\n\n► **selectSession**(params?: *SelectSessionParams*): `Promise`< SelectSessionResponse>\n\n**Parameters:**\n\n| Param | Type | Description |\n| ------ | ------ | ------ |\n| params | SelectSessionParams   |  参数 <br/> + `multiple`: 表示支持多选 <br/> + `title`: 设置对话框的标题 |\n\n**Returns:** `Promise`< SelectSessionResponse>\n\n**Types:**\n```typescript\n/**\n * 选择会话请求参数\n */\ninterface SelectSessionParams {\n  /**\n   * 是否支持多选\n   */\n  multiple?: boolean\n  /**\n   * 对话框显示的标题\n   */\n  title?: string\n}\n\n/**\n * 选择会话响应参数\n */\ninterface SelectSessionResponse {\n  sessionId: string\n  sessionType: 'user' | 'chatroom'\n}\n```\n\n---\n\n###  openDialog\n\n► **openDialog**(params: *DialogParams*): `void`\n\n**Parameters:**\n\n| Param | Type | Description |\n| ------ | ------ | ------ |\n| params | DialogParams  |  选项<br/>+ type: 会话类型, 1 群聊 2 单聊 3公告广播<br/>+ id: 会话ID， 群组id或个人id<br/>+ messageId: //消息记录ID |\n\n**Returns:** `void`\n\n**Types:**\n\n```typescript\n/**\n * 会话类型\n */\nenum DialogType {\n  /**\n   * 群聊\n   */\n  GroupChat = 1,\n  /**\n   * 单聊\n   */\n  Chat,\n  /**\n   * 公告广播\n   */\n  Announcement,\n  /**\n   * 打开访客聊天窗口, id为访客id\n   */\n  Visitor,\n}\n\n/**\n * 打开会话框请求参数\n */\ninterface DialogParams {\n  type: DialogType\n  id: string\n  messageId?: string\n}\n```\n          ")))},x([o.observable,I("design:type",String)],n.prototype,"userId",void 0),x([o.observable,I("design:type",Number)],n.prototype,"type",void 0),x([o.observable,I("design:type",Object)],n.prototype,"selectSessionParams",void 0),x([o.observable,I("design:type",Array)],n.prototype,"selectedSession",void 0),n=x([s.observer],n)}(r.a.Component);n.default=A;var M,N}});
//# sourceMappingURL=9.d6b08a2d.chunk.js.map